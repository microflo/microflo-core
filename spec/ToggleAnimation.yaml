name: "ToggleAnimation"
fixture:
 type: 'fbp'
 data: |
  # @runtime microflo

  INPORT=it.CLOCK:CLOCK
  INPORT=it.VALUE0:VALUE0
  INPORT=it.VALUE1:VALUE1
  INPORT=it.START:START
  INPORT=it.PERIOD:PERIOD
  INPORT=it.DURATION:DURATION
  INPORT=it.DUTYCYCLE:DUTYCYCLE
  OUTPORT=it.RUNNING:RUNNING
  OUTPORT=it.VALUE:VALUE

  it(ToggleAnimation) VALUE -> IN v(Forward)
  it RUNNING -> IN r(Forward)

cases:
-
  name: 'no animation setup'
  assert: 'should give false'
  inputs:
    clock: 100
  expect:
    value: false
    running: false
-
  name: 'in first period high'
  assert: 'should give true'
  inputs:
    start: 1000
    duration: 200
    period: 200
    clock: 1050
  expect:
    value: true
    running: true
-
  name: 'in first period low'
  assert: 'should give false'
  inputs:
    start: 1000
    duration: 400
    period: 200
    clock: 1150
  expect:
    value: false
    running: true
-
  name: 'before animation start'
  assert: 'should give false'
  inputs:
    start: 100
    duration: 100
    clock: 99
  expect:
    value: false
    running: false
-
  name: 'after animation end'
  assert: 'should give false'
  inputs:
    start: 101
    duration: 200
    clock: 302
  expect:
    value: false
    running: false

