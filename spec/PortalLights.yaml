name: "PortalLights"
topic: ToggleAnimationsN
fixture:
 type: 'fbp'
 data: |
  # @runtime microflo

  INPORT=anim.ANIMATION:ANIMATION
  OUTPORT=led.PIXELSET:PIXELSET
  OUTPORT=led.SHOWN:SHOWN

  timer(Timer) OUT -> CLOCK anim(ToggleAnimationsN) VALUE -> IN led(LedChainNeoPixel)
  anim CLOCK -> SHOW led  # show every frame

  '6' -> PIN led
  '3' -> PIXELS led
  '3' -> TRACKS anim
  '500' -> INTERVAL timer

  led PIXELSET -> IN p(Forward)
  led SHOWN -> IN s(Forward)

cases:
-
  name: '1 active track'
  assertion: 'should call shown'
  inputs:
    animation: [
      0, # track idx
      "0xEE00EE", # val0
      "0xAA00AA", # val1
      200, # period
      50, # dutycycle
      0, # offset
      1000 ] # duration
  expect:
    shown: null
